<!DOCTYPE html>
<html lang="ru">
 
  @@include('html/head.html', {
      "title": "Контактные данные веб-студии PrimeCoder телефон почта техническая поддержка",
      "description": "Контакты PrimeCoder Обратная связь техническая поддержка номер телефона +7 495 147 65 77 заказать сайт" 
  })
<body>
    @@include('html/header.html')
    <div class="container">
        <section>
            <div class="d-flex jcsb gap-h-30 contacts-block">
                <div class="contacts-body">
                    <h1>Контакты PrimeCoder</h1>
                    <div class="contacts d-flex flex-wrap mt-150 jcsb">
                        <div class="work-hours">
                            <h5>График работы</h5>
                            <p>Пн-Пт с 9:00 по 22:00</p>
                        </div>
                        <div class="email">
                            <h5>Почта</h5>
                            <a href="mailto:info@primecoder.ru">info@primecoder.ru</a>
                        </div>
                        <div class="adres">
                            <h5>Адрес</h5>
                            <p>Москва, ул. Земляной<br>
                                Вал, 50Ас5</p>
                        </div>
                        <div class="tel">
                            <h5>Телефон</h5>
                            <a href="tel:84951476577">+7 (495)-147-65-77</a>
                        </div>
                    </div>
                    <div class="social-network mt-150">
                        <a href="">
                            <img src="@img/instagram-icon.png" alt="instagram-icon Primecoder">
                        </a>
                        <a href="">
                            <img src="@img/vk-icon-white.png" alt="vk-icon Primecoder">
                        </a>
                        <a href="">
                            <img src="@img/telegram-icon-white.png" alt="telegram-icon Primecoder">
                        </a>
                        <a href="">
                            <img src="@img/whatsapp-icon-white.png" alt="whatsapp-icon Primecoder">
                        </a>
                    </div>
                </div>
                <div id="contacts-form" class="contacts-form">
                    <div class="form-header">
                        <h3>Обратная связь</h3>
                    </div>
                    <form  id="contact-form" action="#" method="POST" class="d-flex flex-column gap-v-15">
                        <div class="form-item">
                            <label class="labelInput" for="name">Имя</label>
                            <input type="text" name="name" placeholder="Введите имя"  id="name" class="_req">    
                        </div>
                        <div class="form-item">
                        <label class="labelInput" for="tel">Телефон</label>
                        <input type="tel" name="tel" placeholder="Введите номер телефона"  id="tel" class="_req">
                    </div>
                        <div class="form-item">
                        <label class="labelInput" for="email">Электронная почта</label>
                        <input type="email" name="email" placeholder="Введите email" id="email" class="_req _email">
                    </div>
                        <div class="form-item">
                        
                        <label class="labelInput" for="question">Ваш вопрос</label>
                        <textarea type="text" class="question-input" name="question" placeholder="Введите вопрос" id="question"></textarea>
                    </div>
                        <div class="submit-form">
                            <input type="submit" class="submit-btn jcc"  value="Отправить" id="submit">
                            <p class="pt-15">Нажимая «Отправить», Вы подтверждаете, что ознакомились с <a href="privacy" style="color:#FB0">политикой конфиденциальности</a> и соглашаетесь на обработку персональных данных</p>
                        </div>
                       
                    </form>
                </div>
            </div>
        </section>
        <div class="bg-image">
            <img class="bg-sphere" src="@img/gray-bg-sphere.png" alt="gray-bg-sphere PrimeCoder">
            <img class="bg-sphere-small" src="@img/gray-bg-sphere-small.png" alt="gray-bg-sphere-small PrimeCoder">
        </div>
    </div>
    <div class="cursor cursor--large"></div>
    <div class="cursor cursor--small"></div>
    @@include('html/footer.html')    
    <script>
        "use strict"
        /****FORM****/
        document.addEventListener('DOMContentLoaded', function(){
        let form = document.getElementById('contact-form')
        form.addEventListener('submit', formSend);

        async function formSend(e){
            e.preventDefault();
            let error = formValidate(form)
            let formData = new FormData(form)
            
            if(error===0){
                form.classList.add('_sending')
               
                let response = await fetch('/sendemail.php', {
                    method: 'POST',
                    body: formData

                })
                if(response.ok){
                    console.log(response);
                    let result = await response.json();
                    
                    alert(result.message);
                    form.reset();
                    form.classList.remove('_sending')
                } else {
                    alert('Ошибка');
                    form.classList.remove('_sending')
                }
            } else {
                alert('Заполните обязательные поля')
            }
            
        }
        function formValidate(form){
                let error = 0;
                let formReq = document.querySelectorAll('._req')

                for (let index=0; index < formReq.length; index++){
                    const input = formReq[index];

                    formRemoveError(input)
                    if(input.classList.contains('_email')){
                        if(emailTest(input)){
                            formAddError(input);
                            error++;
                        }
                    } else if (input.getAttribute("type") === "checkbox" && input.checked === false){
                        formAddError(input);
                        error++;
                    } else {
                        if (input.value === ''){
                            formAddError(input);
                            error++;
                        }
                    }

                }
                return error;
            }

            function formAddError(input){
                input.parentElement.classList.add('_error')
                input.classList.add('_error')
               
            }
            function formRemoveError(input){
                input.parentElement.classList.remove('_error')
                input.classList.remove('_error')
            }
            function emailTest(input){
                return !/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(input.value)
            }
    })
    </script>
    <script type="text/javascript" src="js/app.min.js"></script>

</body>
</html>