<!DOCTYPE html>
<html lang="ru">
 
  @@include('html/head.html', {
      "title": "Стоимость создания интернет сайта под ключ Становитесь нашим клиентом",
      "description":"Заказать сайт на заказ под ключ от профессиональной команды веб студии PrimeCoder стать клиентом и заказать разработку сайта"
  })
<body>
    @@include('html/header.html')
    <div class="container">

        <section class="new-client-body">
            <div class="section-header">
                <h1>Стать клиентом</h1>
                <p>Наша команда всегда готова к сотрудничеству с любым бизнесом! Новым клиентам PrimeCoder мы рекомендуем заполнить мини-бриф. Это поможет сэкономить время менеджерам и подобрать для вас необходимые услуги. Таким образом, наше знакомство станет полезным и продуктивным.</p>
            </div>
            <div class="new-client-form">
                <form action="" id="new-client-form" method="POST">
                    <div class="questions">
                        <label class="labelInput" for="company">1. Чем Вы занимаетесь?</label>
                        <p>Расскажите пару слов о вашем бизнесе: название организации, сфера деятельности (продажи, услуги), если есть сайт, можете добавить ссылку. </p>
                        <input class="questionnaire company _req-client" type="text" name="company" id="company">
                    </div>

                    <div class="questions">
                        <label class="labelInput" for="difficulties">2. С какими трудностями вы столкнулись?</label>
                        <p>Ваш бизнес не приносит желаемый доход? Недостаточно продаж? Мало заявок? Нет новых клиентов? Напишите, какие проблемы испытывает компания в данный момент.</p>
                        <input class="questionnaire difficulties _req-client" type="text" name="difficulties" id="difficulties"> 
                    </div>
                    
                    <div class="questions">
                        <label class="labelInput" for="task">3. Какую задачу вы перед собой ставите?</label>
                        <p>Опишите цель вашего обращения (нужен сайт, мобильное приложение, комплексное продвижение, и т.д).</p>
                        <input class="questionnaire task _req-client" type="text" name="task" id="task"> 
                    </div>


                    <div class="questions">
                        <label class="labelInput" for="expectations">4. Ваши ожидания</label>
                        <p>Что вы хотите получить на выходе? В какой срок? Напишите, какие результаты вы желаете получить.</p>
                        <input class="questionnaire expectations _req-client" type="text" name="expectations" id="expectations"> 
                    </div>



                    <div class="questions">
                        <label class="labelInput _req-client" for="money">5. Какой бюджет вы готовы потратить на решение всех ваших задач?</label>
                        <p>Укажите минимальную и максимальную сумму, которую вы готовы отдать за результат.</p>
                        <input class="questionnaire money _req-client" type="text" name="money" id="money"> 
                    </div>



                    <h2 class="mb-40 mt-80">Контактные данные</h2>
                    <div class="standart__form__wrapper d-flex flex-wrap">
                        <div class="questions">
                            <label class="labelInput" for="name">Имя</label>
                            <input type="text" class="_req-client" name="name" placeholder="Введите имя" id="name">
                        </div>
                        <div class="questions">
                            <label class="labelInput" for="tel">Телефон</label>
                            <input type="tel" class="_req-client" name="tel" placeholder="Введите номер телефона" id="tel">
                        </div>
                        <div class="questions">
                            <label class="labelInput" for="email">Электронная почта</label>
                            <input type="email" name="email" placeholder="Введите email" id="email">
                        </div>
                        <div class="questions">
                            <label class="labelInput" for="commit">Комментарий</label>
                            <input type="text" name="commit" placeholder="Ваш комментарий" id="commit">
                    </div>
                        
                        
                        
                        
                    </div>
                    <div class="submit__form d-flex ">
                    <button type="submit" class="btn-small" style="width: 50%;">Отправить</button>
                    <p>Нажимая «Отправить», Вы подтверждаете, что ознакомились с <a href="privacy" style="color: #FB0;">политикой конфиденциальности</a> и соглашаетесь на обработку персональных данных</p>
                    </div>
                </form>
            </div>
        </section>
        <div class="bg-image">
            <img class="bg-sphere" src="@img/gray-bg-sphere.png" alt="gray-bg-sphere PrimeCoder">
            <img class="bg-sphere-small" src="@img/gray-bg-sphere-small.png" alt="gray-bg-sphere-small PrimeCoder">
        </div>
    </div>
</div>
<div class="cursor cursor--large"></div>
<div class="cursor cursor--small"></div>
@@include('html/footer.html')
<script type="text/javascript" src="js/app.min.js"></script>
<script>
    /****FORM****/
    document.addEventListener('DOMContentLoaded', function(){
      const clientForm = document.getElementById('new-client-form')
      clientForm.addEventListener('submit', formSend)

      async function formSend(e){
          e.preventDefault();
          let error = formValidate(clientForm)

          let formData = new FormData(clientForm)

          if(error===0){
            clientForm.classList.add('_sending')
            
              let response = await fetch('send.php', {
                  method: 'POST',
                  body: formData

              })
              if(response.ok){
                  let result = await response.json();
                  alert(result.message)
                  clientForm.reset()
                  clientForm.classList.remove('_sending')

              } else {
                  alert('Ошибка')
                  clientForm.classList.remove('_sending')
              }
          } else {
              alert('Заполните обязательные поля')
          }
          
      }
      function formValidate(clientForm){
              let error = 0;
              let formReq = document.querySelectorAll('._req-client')

              for (let index=0; index < formReq.length; index++){
                  const input = formReq[index];

                  formRemoveError(input)
                      if (input.value === ''){
                          formAddError(input);
                          error++;
                      }
                  

              }
              return error;
          }

          function formAddError(input){
              input.parentElement.classList.add('_error')
              input.classList.add('_error')
            
          }
          function formRemoveError(input){
            input.parentElement.classList.remove('_error')
            input.classList.remove('_error')
        }
    })


   
  
  </script>
</body>
</html>